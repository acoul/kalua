#!/bin/sh

case "$ACTION" in
	'ifup')
		. /tmp/loader

		interface_needs_it()
		{
			test "$DEVICE" = "$LANDEV" && return 0
			test "$DEVICE" = "$WANDEV" && return 0
			_net dev_is_tuntap "$DEVICE" && return 0

			# TODO: maybe we dont need AP-interfaces, just adhoc/mesh
			_net dev_is_wifi "$DEVICE"
		}

		interface_needs_it && {
			_netfilter traffic_control_add "$DEVICE"
		}
	;;
esac
